---
import BaseHead from '@/components/BaseHead'
import Header from '@/components/Header'
import AirNavBar from '@/components/AirNavBar'
import NewNavBar from '@/components/NewNavBar'
import Footer from '@/components/Footer'
import ProviderTheme from '@/components/ProviderTheme'
import ProviderAnimations from '@/components/ProviderAnimations'
import TwSizeIndicator from '@/components/TwSizeIndicator'
// import EditBlog from '@/components/editBlog'

const { title, description, image, articleDate } = Astro.props
---

<html lang="en" class="scroll-smooth">
  <head>
    <BaseHead
      title={title}
      description={description}
      ogImage={image}
      articleDate={articleDate}
    />
    <ProviderTheme />
    <ProviderAnimations />
  </head>

  <body
    class="bg-white text-stone-950 antialiased dark:bg-[#0a0910] dark:text-white"
  >
    <main
      class="container mx-auto mt-6 grid min-h-dvh grid-rows-[auto_1fr_auto] p-4 md:mt-12 md:p-6"
    >
      <!-- <Header /> -->
      <!-- <AirNavBar /> -->
      <NewNavBar />
      <slot />
      <Footer />
    </main>
    <TwSizeIndicator />
    <!-- <EditBlog /> -->
    <script>
      ;(function () {
        const e = 'system'
        if (window.basic_script) return
        function t(e) {
          'dark' === e
            ? document.documentElement.classList.add('dark')
            : document.documentElement.classList.remove('dark')
        }
        window.basic_script = !0
        const d = function () {
          ;(e && e.endsWith(':only')) || (localStorage.theme, 0)
            ? t(e.replace(':only', ''))
            : 'dark' === localStorage.theme ||
                (!('theme' in localStorage) &&
                  window.matchMedia('(prefers-color-scheme: dark)').matches)
              ? t('dark')
              : t('light')
        }
        function a(e, t, d) {
          const a = 'string' == typeof e ? document.querySelectorAll(e) : e
          a &&
            a.length &&
            a.forEach((e) => {
              e.addEventListener(t, (t) => d(t, e), !1)
            })
        }
        d()
        const o = function () {
            let t = window.scrollY,
              d = !0
            a('#header nav', 'click', function () {
              document
                .querySelector('[data-aw-toggle-menu]')
                ?.classList.remove('expanded'),
                document.body.classList.remove('overflow-hidden'),
                document.getElementById('header')?.classList.remove('h-screen'),
                document.getElementById('header')?.classList.remove('expanded'),
                document.getElementById('header')?.classList.remove('bg-page'),
                document.querySelector('#header nav')?.classList.add('hidden'),
                document
                  .querySelector('#header > div > div:last-child')
                  ?.classList.add('hidden')
            }),
              a('[data-aw-toggle-menu]', 'click', function (e, t) {
                t.classList.toggle('expanded'),
                  document.body.classList.toggle('overflow-hidden'),
                  document
                    .getElementById('header')
                    ?.classList.toggle('h-screen'),
                  document
                    .getElementById('header')
                    ?.classList.toggle('expanded'),
                  document
                    .getElementById('header')
                    ?.classList.toggle('bg-page'),
                  document
                    .querySelector('#header nav')
                    ?.classList.toggle('hidden'),
                  document
                    .querySelector('#header > div > div:last-child')
                    ?.classList.toggle('hidden')
              }),
              a('[data-aw-toggle-color-scheme]', 'click', function () {
                e.endsWith(':only') ||
                  (document.documentElement.classList.toggle('dark'),
                  (localStorage.theme =
                    document.documentElement.classList.contains('dark')
                      ? 'dark'
                      : 'light'))
              }),
              a('[data-aw-social-share]', 'click', function (e, t) {
                const d = t.getAttribute('data-aw-social-share'),
                  a = encodeURIComponent(t.getAttribute('data-aw-url')),
                  o = encodeURIComponent(t.getAttribute('data-aw-text'))
                let n
                switch (d) {
                  case 'facebook':
                    n = `https://www.facebook.com/sharer.php?u=${a}`
                    break
                  case 'twitter':
                    n = `https://twitter.com/intent/tweet?url=${a}&text=${o}`
                    break
                  case 'linkedin':
                    n = `https://www.linkedin.com/shareArticle?mini=true&url=${a}&title=${o}`
                    break
                  case 'whatsapp':
                    n = `https://wa.me/?text=${o}%20${a}`
                    break
                  case 'mail':
                    n = `mailto:?subject=%22${o}%22&body=${o}%20${a}`
                    break
                  default:
                    return
                }
                const c = document.createElement('a')
                ;(c.target = '_blank'), (c.href = n), c.click()
              })
            function o() {
              const e = document.querySelector('#header[data-aw-sticky-header]')
              e &&
                (t > 60 && !e.classList.contains('scroll')
                  ? e.classList.add('scroll')
                  : t <= 60 &&
                    e.classList.contains('scroll') &&
                    e.classList.remove('scroll'),
                (d = !1))
            }
            window
              .matchMedia('(max-width: 767px)')
              .addEventListener('change', function () {
                document
                  .querySelector('[data-aw-toggle-menu]')
                  ?.classList.remove('expanded'),
                  document.body.classList.remove('overflow-hidden'),
                  document
                    .getElementById('header')
                    ?.classList.remove('h-screen'),
                  document
                    .getElementById('header')
                    ?.classList.remove('expanded'),
                  document
                    .getElementById('header')
                    ?.classList.remove('bg-page'),
                  document
                    .querySelector('#header nav')
                    ?.classList.add('hidden'),
                  document
                    .querySelector('#header > div > div:last-child')
                    ?.classList.add('hidden')
              }),
              o(),
              a([document], 'scroll', function () {
                ;(t = window.scrollY),
                  d ||
                    (window.requestAnimationFrame(() => {
                      o()
                    }),
                    (d = !0))
              })
          },
          n = function () {
            document.documentElement.classList.add(
              'md:motion-safe:scroll-smooth',
            )
            const e = document.querySelector('[data-aw-toggle-menu]')
            e && e.classList.remove('expanded'),
              document.body.classList.remove('overflow-hidden'),
              document.getElementById('header')?.classList.remove('h-screen'),
              document.getElementById('header')?.classList.remove('expanded'),
              document.querySelector('#header nav')?.classList.add('hidden')
          }
        ;(window.onload = o),
          (window.onpageshow = n),
          document.addEventListener('astro:after-swap', () => {
            d(), o(), n()
          })
      })()
    </script>
  </body>
</html>
